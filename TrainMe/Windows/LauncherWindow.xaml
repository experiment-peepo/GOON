<!--
	Copyright (C) 2021 Damsel

	This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

	This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

	You should have received a copy of the GNU General Public License along with this program. If not, see <https://www.gnu.org/licenses/>. 
-->

<Window x:Class="TrainMe.Windows.LauncherWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TrainMe.Windows"
        xmlns:vm="clr-namespace:TrainMe.ViewModels"
        mc:Ignorable="d"
        Title="TrainMe Launcher" SizeToContent="Height" Width="500"
        ResizeMode="NoResize"
        WindowStyle="None"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True" Background="Transparent"
        >
    <StackPanel Background="#FF301B32">
        <Grid Height="50" FlowDirection="RightToLeft" Background="#FF2D0A30" MouseLeftButtonDown="Grid_MouseLeftButtonDown">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Button Grid.Column="5" Width="200" HorizontalAlignment="Right" Background="Transparent" Command="{Binding KofiCommand}">
                <Image Source="/Images/kofi.png"></Image>
            </Button>
            <Button Style="{StaticResource ControlButton}" Command="{Binding ExitCommand}">x</Button>
            <Button Style="{StaticResource ControlButton}" Command="{Binding MinimizeCommand}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}" Grid.Column="1">-</Button>
        </Grid>
        <Label>TrainMe by SissyDamsel</Label>
        <Label Style="{StaticResource LowerTitle}" FontSize="9" FontStyle="Italic">Overlay video player for sissies</Label>
        <Label Style="{StaticResource LowerTitle}">Hypnosis opacity</Label>
        <Slider Margin="5" x:Name="OpacitySlider" Minimum="0" Maximum="0.9" Value="{Binding Opacity}" TickFrequency="0.1" TickPlacement="Both"></Slider>

        <Label Style="{StaticResource LowerTitle}">Audio</Label>
        <Slider Margin="5" x:Name="VolumeSlider" Minimum="0" Maximum="1" Value="{Binding Volume}" TickFrequency="0.1" TickPlacement="Both"></Slider>

        
        <Button x:Name="BrowseButton" Command="{Binding BrowseCommand}">Browse</Button>
        <Label Style="{StaticResource LowerTitle}">Added Files</Label>
        <ListView x:Name="AddedFilesList" ItemsSource="{Binding AddedFiles}" SelectionMode="Multiple" MaxHeight="200" Margin="0,5,0,0" ScrollViewer.CanContentScroll="True" AllowDrop="True" DragOver="AddedFilesList_DragOver" Drop="AddedFilesList_Drop">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="0,2,0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{Binding}" Foreground="White"/>
                        <ComboBox x:Name="AssignCombo" Grid.Column="1" Margin="8,0,0,0" Width="100" Tag="{Binding}"
                                  Loaded="AssignCombo_Loaded" SelectionChanged="AssignCombo_SelectionChanged"/>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5,0,5">
            <Button Command="{Binding RemoveSelectedCommand}" CommandParameter="{Binding ElementName=AddedFilesList, Path=SelectedItems}" Margin="5,0">Remove Selected</Button>
            <Button Command="{Binding ClearAllCommand}" Margin="5,0">Clear All</Button>
        </StackPanel>
        
        
        

        <Grid HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Style="{StaticResource LowerTitle}">Random shuffle</Label>
            <CheckBox x:Name="ShuffleCheckBox" IsChecked="{Binding Shuffle}" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center"></CheckBox>
        </Grid>
        <Button x:Name="HypnotizeButton" Command="{Binding HypnotizeCommand}" CommandParameter="{Binding ElementName=AddedFilesList, Path=SelectedItems}" IsEnabled="{Binding IsHypnotizeEnabled}" Content="{Binding HypnotizeButtonText}" />
        <Button x:Name="PauseButton" Command="{Binding PauseCommand}" IsEnabled="{Binding IsPauseEnabled}" Content="{Binding PauseButtonText}" />
        <Button x:Name="DehypnotizeButton" Command="{Binding DehypnotizeCommand}" IsEnabled="{Binding IsDehypnotizeEnabled}">End All Training</Button>
    </StackPanel>

</Window>
